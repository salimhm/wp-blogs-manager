{% extends 'dashboard/base.html' %}

{% block page_title %}Dashboard{% endblock %}

{% block header_actions %}
<a href="{% url 'dashboard:add_site' %}" class="btn btn-primary">
    <span>+</span> Add Site
</a>
{% endblock %}

{% block content %}
<!-- Stats Cards -->
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-icon">ğŸŒ</div>
        <div class="stat-info">
            <span class="stat-value">{{ total_sites }}</span>
            <span class="stat-label">Total Sites</span>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">âœ“</div>
        <div class="stat-info">
            <span class="stat-value">{{ verified_sites }}</span>
            <span class="stat-label">Verified</span>
        </div>
    </div>
    <div class="stat-card">
        <div class="stat-icon">â—‹</div>
        <div class="stat-info">
            <span class="stat-value">{{ total_sites|add:"-"|add:verified_sites|default:0 }}</span>
            <span class="stat-label">Pending</span>
        </div>
    </div>
</div>

<!-- Sites List -->
<div class="card">
    <div class="card-header">
        <h2 class="card-title">Your Sites</h2>
    </div>
    <div class="card-body">
        {% if sites %}
        <div class="sites-grid">
            {% for site in sites %}
            <div class="site-card">
                <div class="site-header">
                    <span class="site-status {% if site.is_verified %}verified{% else %}pending{% endif %}">
                        {% if site.is_verified %}âœ“{% else %}â—‹{% endif %}
                    </span>
                    <h3 class="site-domain">{{ site.domain }}</h3>
                </div>
                <div class="site-meta">
                    <span class="badge {% if site.is_fresh_installation %}badge-info{% else %}badge-secondary{% endif %}">
                        {% if site.is_fresh_installation %}Fresh{% else %}Existing{% endif %}
                    </span>
                    <span class="site-date">{{ site.created_at|date:"M d, Y" }}</span>
                </div>
                <div class="site-actions">
                    <a href="{% url 'dashboard:site_detail' site.id %}" class="btn btn-sm btn-secondary">View</a>
                    <a href="{% url 'dashboard:manage_api_keys' site.id %}" class="btn btn-sm btn-ghost">API Keys</a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <div class="empty-state">
            <div class="empty-icon">ğŸŒ</div>
            <h3>No sites yet</h3>
            <p>Add your first WordPress site to get started</p>
            <a href="{% url 'dashboard:add_site' %}" class="btn btn-primary">Add Site</a>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
